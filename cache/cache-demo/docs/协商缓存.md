# Last-Modified/If-Modified-Since
## Last-Modified
* Last-Modified 是 HTTP 协议中用来控制缓存行为的响应头信息之一，它指定了该资源的最后修改时间。
* 浏览器在下次请求该资源时，会将该头信息发送给服务器，服务器可以根据该头信息来验证缓存是否有效，如果缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。

Last-Modified 头信息的值是一个 GMT 格式的日期字符串，例如：
```
Last-Modified: Sat, 15 Apr 2023 03:28:38 GMT
```
1. 该头信息指定了该资源的最后修改时间为 Sat, 15 Apr 2023 03:28:38 GMT。
2. 当浏览器下次请求该资源时，会将该头信息发送给服务器
3. 服务器可以根据该头信息来验证缓存是否有效，如果缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。
4. 需要注意的是，Last-Modified 头信息的缺点是，它只能精确到秒级别，如果同一秒内多次修改了该资源，就会导致缓存失效。另外，一些代理服务器可能会修改 Last-Modified 头信息，导致缓存失效。
## If-Modified-Since
* If-Modified-Since 是 HTTP 协议中用来控制缓存行为的请求头信息之一
* 它用于向服务器发送上次请求该资源时的 Last-Modified 头信息
* 服务器可以根据该头信息来验证缓存是否有效，如果缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。

当浏览器请求一个资源时，如果该资源已经被缓存了，浏览器会在请求头信息中添加 If-Modified-Since 头信息，该头信息的值为上次请求该资源时的 Last-Modified 头信息的值。例如：
```
If-Modified-Since: Sat, 15 Apr 2023 03:28:38 GMT
```
1. 服务器在收到该请求时，会将该头信息与该资源的最后修改时间进行比较
2. 如果两者相同，说明缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。
3. 如果两者不同，说明缓存失效，服务器需要返回新的资源。

4. 需要注意的是，If-Modified-Since 头信息只能精确到秒级别，而且可能会受到代理服务器的影响。另外，一些服务器可能不支持 Last-Modified 头信息，或者不支持精确到秒级别的时间戳.

# Etag/If-None-Match
## Etag
* ETag 是 HTTP 协议中用来控制缓存行为的头信息之一，它是由服务器生成的唯一标识符，可以精确地表示资源的状态，而且不受时钟同步和代理服务器的影响。
* 浏览器在下次请求该资源时，会将该头信息发送给服务器，服务器可以根据该头信息来验证缓存是否有效，如果缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。

ETag 头信息的值可以是任何字符串，通常是一个哈希值或者版本号。例如：
```
ETag: "686897696a7c876b7e"
```
1. 该头信息指定了该资源的 ETag 值为 "686897696a7c876b7e"。
2. 当浏览器下次请求该资源时，会将该头信息发送给服务器，服务器可以根据该头信息来验证缓存是否有效，如果缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。

3. 需要注意的是，ETag 头信息的缺点是，它会增加服务器的负担，因为服务器需要为每个资源生成一个唯一的 ETag 值。
4. 另外，一些代理服务器可能会修改 ETag 头信息，导致缓存失效。
## If-None-Match
* If-None-Match 是 HTTP 协议中用来控制缓存行为的请求头信息之一，它用于向服务器发送上次请求该资源时的 ETag 头信息
* 服务器可以根据该头信息来验证缓存是否有效，如果缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。

当浏览器请求一个资源时，如果该资源已经被缓存了，浏览器会在请求头信息中添加 If-None-Match 头信息，该头信息的值为上次请求该资源时的 ETag 头信息的值。例如：
```
If-None-Match: "686897696a7c876b7e"
```
1. 服务器在收到该请求时，会将该头信息与该资源的 ETag 值进行比较
2. 如果两者相同，说明缓存有效，可以返回 304 状态码，告诉浏览器直接使用缓存。
3. 如果两者不同，说明缓存失效，服务器需要返回新的资源。
4. 需要注意的是，If-None-Match 头信息可能会受到代理服务器的影响，因为一些代理服务器可能会修改 ETag 头信息。
5. 另外，一些服务器可能不支持 ETag 头信息，这时候就需要使用 Last-Modified 头信息来控制缓存行为。

