# 前端缓存
前端缓存是指在浏览器中缓存静态资源，如 HTML、CSS、JavaScript、图片等，以提高网站的性能和用户体验。前端缓存可以减少网络请求的次数，从而加快页面加载速度，降低服务器的负载，节省用户的流量费用。

前端缓存可以分为两种类型：强缓存和协商缓存。
## 强缓存
强缓存：强缓存是指在浏览器中缓存静态资源的过程中，使用 HTTP 头信息来控制缓存的有效期。如果缓存的资源没有过期，浏览器会直接从缓存中读取资源，而不会向服务器发送请求。常用的 HTTP 头信息有 Expires 和 Cache-Control。

1. Expires：指定缓存资源的过期时间，是一个绝对时间，由服务器返回。如果当前时间在过期时间之前，浏览器会直接从缓存中读取资源，否则会向服务器发送请求。
2. Cache-Control：指定缓存资源的控制策略，是一个相对时间，由服务器返回。常用的控制策略有 max-age、no-cache、no-store 等。其中，max-age 指定缓存资源的最大有效期，如果当前时间在最大有效期之前，浏览器会直接从缓存中读取资源，否则会向服务器发送请求。
## 协商缓存
协商缓存：协商缓存是指在浏览器中缓存静态资源的过程中，使用 HTTP 头信息来控制缓存的更新。如果缓存的资源过期了，浏览器会向服务器发送请求，服务器会返回一个状态码和一些头信息，浏览器根据这些头信息来判断是否需要更新缓存。常用的头信息有 Last-Modified 和 ETag。

1. Last-Modified：指定缓存资源的最后修改时间，由服务器返回。如果浏览器要更新缓存，会向服务器发送一个 If-Modified-Since 头信息，该头信息的值为缓存资源的最后修改时间。如果服务器返回的资源的最后修改时间和浏览器发送的 If-Modified-Since 头信息的值相同，说明缓存资源没有更新，服务器会返回一个 304 状态码，浏览器会直接从缓存中读取资源。
2. ETag：指定缓存资源的唯一标识符，由服务器返回。如果浏览器要更新缓存，会向服务器发送一个 If-None-Match 头信息，该头信息的值为缓存资源的唯一标识符。如果服务器返回的资源的唯一标识符和浏览器发送的 If-None-Match 头信息的值相同，说明缓存资源没有更新，服务器会返回一个 304 状态码，浏览器会直接从缓存中读取资源。
总之，前端缓存可以提高网站的性能和用户体验，减少网络请求的次数，加快页面加载速度，降低服务器的负载，节省用户的流量费用。前端缓存可以分为强缓存和协商缓存两种类型，常用的 HTTP 头信息有 Expires、Cache-Control、Last-Modified 和 ETag。



# 当 Expires、Cache-Control、Last-Modified 和 ETag 头信息同时存在时，浏览器会按照以下顺序来判断缓存是否有效：

1. 首先，浏览器会检查 Cache-Control 头信息中是否包含 no-cache 或 no-store，如果包含，则缓存失效，需要重新从服务器获取资源。

2. 如果 Cache-Control 头信息中包含 max-age，则浏览器会计算出资源的过期时间，如果当前时间小于过期时间，则缓存有效，可以直接使用缓存。

3. 如果 Expires 头信息存在，则浏览器会将该头信息的值与当前时间进行比较，如果当前时间小于过期时间，则缓存有效，可以直接使用缓存。

4. 如果 Last-Modified 和 ETag 头信息都存在，浏览器会在请求头信息中同时添加 If-None-Match 和 If-Modified-Since 头信息，分别对应上次请求该资源时的 ETag 和 Last-Modified 头信息的值。服务器在收到该请求时，会先根据 If-None-Match 头信息来判断缓存是否有效，如果服务器返回 304 状态码，则说明缓存有效，可以直接使用缓存，如果服务器返回新的资源，则浏览器会发送 If-Modified-Since 头信息，如果服务器返回 304 状态码，则说明缓存有效，可以直接使用缓存。
